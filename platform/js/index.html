<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Twisted Brain - Futuristic Haxe Development Platform with Neon Aesthetics">
    <meta name="keywords" content="Haxe, DevOps, Twisted Brain, Futuristic, Neon, Development Platform">
    <meta name="author" content="Twisted Brain Team">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Twisted Brain - Futuristic Haxe Platform">
    <meta property="og:description" content="Experience the future of cross-platform development with Twisted Brain's neon-powered Haxe ecosystem.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://twisted-brain.github.io/tb-pages/">
    <meta property="og:image" content="https://twisted-brain.github.io/tb-pages/assets/og-image.png">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Twisted Brain - Futuristic Haxe Platform">
    <meta name="twitter:description" content="Experience the future of cross-platform development with Twisted Brain's neon-powered Haxe ecosystem.">
    <meta name="twitter:image" content="https://twisted-brain.github.io/tb-pages/assets/twitter-card.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    
    <title>Twisted Brain - Futuristic Haxe Development Platform</title>
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600&family=Fira+Code:wght@300;400;500&display=swap" as="style">
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="TwistedBrainApp.js" as="script">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Performance and Security Headers -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#00FFFF">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Twisted Brain",
        "description": "Futuristic Haxe development platform with neon aesthetics and cross-platform capabilities",
        "url": "https://twisted-brain.github.io/tb-pages/",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Cross-platform",
        "programmingLanguage": "Haxe",
        "author": {
            "@type": "Organization",
            "name": "Twisted Brain Team"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
</head>
<body>
    <!-- Loading Indicator -->
    <div id="loading-indicator">
        <div class="loading-spinner">
            <svg width="60" height="60" viewBox="0 0 60 60">
                <circle cx="30" cy="30" r="25" fill="none" stroke="#00FFFF" stroke-width="3" stroke-dasharray="157" stroke-dashoffset="157" stroke-linecap="round">
                    <animate attributeName="stroke-dashoffset" dur="2s" values="157;0;157" repeatCount="indefinite"/>
                    <animate attributeName="stroke" dur="2s" values="#00FFFF;#FF00FF;#FF6600;#00FFFF" repeatCount="indefinite"/>
                </circle>
            </svg>
        </div>
        <p id="loading-progress">Initializing Twisted Brain...</p>
        <div class="loading-dots">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
    </div>
    
    <!-- Skip to Content Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Main Application Container -->
    <main id="main-content" role="main">
        <!-- Content will be dynamically generated by TwistedBrainApp.hx -->
    </main>
    
    <!-- Error Boundary -->
    <div id="error-boundary" style="display: none;">
        <div class="error-container">
            <h2 class="neon-text-orange">System Error Detected</h2>
            <p>The Twisted Brain interface encountered an unexpected error. Please refresh the page or contact support.</p>
            <button onclick="location.reload()" class="cta-button primary-neon">Restart System</button>
        </div>
    </div>
    
    <!-- Performance Monitoring -->
    <script>
        // Basic performance monitoring
        window.addEventListener('load', function() {
            if ('performance' in window) {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                console.log('Page load time:', loadTime + 'ms');
                
                // Report to analytics if available
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'page_load_time', {
                        'event_category': 'Performance',
                        'event_label': 'Load Time',
                        'value': loadTime
                    });
                }
            }
        });
        
        // Error handling
        window.addEventListener('error', function(e) {
            console.error('JavaScript Error:', e.error);
            
            // Show error boundary
            const errorBoundary = document.getElementById('error-boundary');
            const loadingIndicator = document.getElementById('loading-indicator');
            
            if (errorBoundary && loadingIndicator) {
                loadingIndicator.style.display = 'none';
                errorBoundary.style.display = 'flex';
                errorBoundary.style.position = 'fixed';
                errorBoundary.style.top = '0';
                errorBoundary.style.left = '0';
                errorBoundary.style.width = '100%';
                errorBoundary.style.height = '100%';
                errorBoundary.style.backgroundColor = 'var(--color-dark)';
                errorBoundary.style.alignItems = 'center';
                errorBoundary.style.justifyContent = 'center';
                errorBoundary.style.zIndex = '10000';
            }
        });
        
        // Unhandled promise rejection handling
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled Promise Rejection:', e.reason);
        });
    </script>
    
    <!-- Additional Loading Styles -->
    <style>
        /* Loading Indicator Styles */
        #loading-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--color-dark, #0A0A0A);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            font-family: 'Orbitron', monospace;
        }
        
        .loading-spinner {
            margin-bottom: 2rem;
        }
        
        #loading-progress {
            color: #00FFFF;
            font-size: 1.2rem;
            text-shadow: 0 0 10px #00FFFF;
            margin-bottom: 1rem;
        }
        
        .loading-dots {
            display: flex;
            gap: 0.5rem;
        }
        
        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00FFFF;
            animation: dot-pulse 1.5s infinite;
            box-shadow: 0 0 10px #00FFFF;
        }
        
        .dot:nth-child(2) {
            animation-delay: 0.5s;
            background: #FF00FF;
            box-shadow: 0 0 10px #FF00FF;
        }
        
        .dot:nth-child(3) {
            animation-delay: 1s;
            background: #FF6600;
            box-shadow: 0 0 10px #FF6600;
        }
        
        @keyframes dot-pulse {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1.2);
                opacity: 1;
            }
        }
        
        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #00FFFF;
            color: #0A0A0A;
            padding: 8px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            z-index: 10001;
        }
        
        .skip-link:focus {
            top: 6px;
        }
        
        /* Error Boundary Styles */
        .error-container {
            text-align: center;
            padding: 2rem;
            max-width: 500px;
            background: var(--color-dark-gray, #1A1A1A);
            border-radius: 12px;
            border: 1px solid #FF6600;
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.3);
        }
        
        .error-container h2 {
            font-family: 'Orbitron', monospace;
            margin-bottom: 1rem;
        }
        
        .error-container p {
            color: #CCCCCC;
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        /* Ensure main content is hidden initially */
        #main-content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        #main-content.loaded {
            opacity: 1;
        }
    </style>
    
    <!-- Main Application Script -->
    <script src="TwistedBrainApp.js"></script>
    
    <!-- Service Worker Registration for PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>
    
    <!-- Analytics (placeholder for future implementation) -->
    <!-- 
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    -->
</body>
</html>